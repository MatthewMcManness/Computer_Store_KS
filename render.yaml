services:
  # API (Express + Nodemailer)
  - type: web
    name: tcs-contact-api
    rootDir: api
    runtime: node
    plan: starter
    buildCommand: "npm install"
    startCommand: "npm start"
    healthCheckPath: "/api/health"
    autoDeploy: true
    envVars:
      - key: SMTP_HOST
        sync: false
      - key: SMTP_PORT
        sync: false
      - key: SMTP_SECURE
        sync: false
      - key: SMTP_USER
        sync: false
      - key: SMTP_PASS
        sync: false
      - key: MAIL_FROM
        sync: false
      - key: MAIL_TO
        sync: false
      - key: CORS_ORIGINS
        sync: false

  # Frontend (static site)
  - type: web
    name: tcs-frontend
    rootDir: frontend
    runtime: static
    buildCommand: "echo 'no build step'"
    staticPublishPath: "."
    autoDeploy: true